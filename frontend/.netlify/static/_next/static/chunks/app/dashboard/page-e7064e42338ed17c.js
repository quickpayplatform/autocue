(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1119:function(e,t,n){Promise.resolve().then(n.bind(n,1720))},1720:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),u=n(2265),i=n(9116);function o(){let[e,t]=(0,u.useState)(null),[n,o]=(0,u.useState)(1),[s,a]=(0,u.useState)(1),[c,l]=(0,u.useState)(0),[f,h]=(0,u.useState)(""),[d,m]=(0,u.useState)("1:50\n2:75"),[p,v]=(0,u.useState)(null),[b,g]=(0,u.useState)([]);async function x(){if(e)try{let t=await (0,i.S)("/cues",{method:"GET"},e);g(t)}catch(e){v(e.message)}}async function y(){if(!e){v("Please login first.");return}v(null);try{let t={cueNumber:n,cueList:s,fadeTime:c,notes:f,channels:d.split("\n").map(e=>e.trim()).filter(Boolean).map(e=>{let[t,n]=e.split(":").map(e=>e.trim());return{channelNumber:Number(t),level:Number(n)}})};await (0,i.S)("/cues",{method:"POST",body:JSON.stringify(t)},e),v("Cue submitted."),await x()}catch(e){v(e.message)}}return(0,u.useEffect)(()=>{t(localStorage.getItem("autocue_token"))},[]),(0,u.useEffect)(()=>{x().catch(()=>void 0)},[e]),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{children:"Submit Cue"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y()},children:[(0,r.jsxs)("label",{children:["Cue Number",(0,r.jsx)("input",{type:"number",min:1,value:n,onChange:e=>o(Number(e.target.value))})]}),(0,r.jsxs)("label",{children:["Cue List",(0,r.jsx)("input",{type:"number",min:1,value:s,onChange:e=>a(Number(e.target.value))})]}),(0,r.jsxs)("label",{children:["Fade Time (seconds)",(0,r.jsx)("input",{type:"number",min:0,step:.1,value:c,onChange:e=>l(Number(e.target.value))})]}),(0,r.jsxs)("label",{children:["Notes",(0,r.jsx)("textarea",{value:f,onChange:e=>h(e.target.value)})]}),(0,r.jsxs)("label",{children:["Channels (one per line: channel:level)",(0,r.jsx)("textarea",{rows:4,value:d,onChange:e=>m(e.target.value)})]}),(0,r.jsx)("button",{type:"submit",children:"Submit Cue"})]}),p&&(0,r.jsx)("p",{children:p}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h3",{children:"Your Cue Requests"}),(0,r.jsx)("button",{type:"button",className:"secondary",onClick:()=>x(),children:"Refresh"}),(0,r.jsx)("ul",{children:b.map(e=>(0,r.jsxs)("li",{children:["Cue ",e.cue_number,"/",e.cue_list," - ",e.status," (fade ",e.fade_time,"s)"]},e.id))})]})]})}},9116:function(e,t,n){"use strict";var r;n.d(t,{S:function(){return i}});let u=null!==(r=n(257).env.NEXT_PUBLIC_API_URL)&&void 0!==r?r:"http://localhost:4000";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=new Headers(t.headers);r.set("Content-Type","application/json"),n&&r.set("Authorization","Bearer ".concat(n));let i=await fetch("".concat(u).concat(e),{...t,headers:r});if(!i.ok){var o;throw Error(null!==(o=(await i.json().catch(()=>({error:i.statusText}))).error)&&void 0!==o?o:"Request failed")}return i.json()}},257:function(e,t,n){"use strict";var r,u;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(u=n.g.process)?void 0:u.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,r,u=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a=[],c=!1,l=-1;function f(){c&&r&&(c=!1,r.length?a=r.concat(a):l=-1,a.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=a.length;t;){for(r=a,a=[];++l<t;)r&&r[l].run();l=-1,t=a.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}u.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new d(e,t)),1!==a.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=m,u.addListener=m,u.once=m,u.off=m,u.removeListener=m,u.removeAllListeners=m,u.emit=m,u.prependListener=m,u.prependOnceListener=m,u.listeners=function(e){return[]},u.binding=function(e){throw Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw Error("process.chdir is not supported")},u.umask=function(){return 0}}},n={};function r(e){var u=n[e];if(void 0!==u)return u.exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}r.ab="//";var u=r(229);e.exports=u}()}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1119)}),_N_E=e.O()}]);